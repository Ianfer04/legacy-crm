<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LegacyCRM ‚Äî Panel</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
<header>
  <div class="topbar">
    <div class="brand">LegacyCRM <small>v0.1 (beta eterna)</small></div>
    <input id="globalSearch" placeholder="Buscar... (no funciona bien)" />
    <div class="pill" id="btnSync">Sincronizar</div>
    <div class="pill ok" id="btnHelp">Ayuda</div>
    <div class="pill danger" id="btnLogout">Salir</div>
  </div>
</header>

<div class="wrap">
  <aside>
    <nav class="menu" id="menu">
      <h3>Men√∫</h3>
      <a href="#dashboard" data-route="dashboard" class="active">Dashboard <small>Resumen confuso</small></a>
      <a href="#clientes" data-route="clientes">Clientes <small>Alta fricci√≥n</small></a>
      <a href="#oportunidades" data-route="oportunidades">Oportunidades <small>Campos innecesarios</small></a>
      <a href="#config" data-route="config">Configuraci√≥n <small>Opciones raras</small></a>
      <a href="#reportes" data-route="reportes">Reportes <small>Exporta a ".csvv"</small></a>
    </nav>

    <div class="friction" title="Indicador did√°ctico de fricci√≥n (sube con mala UX)">
      <div class="meter"><i id="frictionBar"></i></div>
      <div class="txt" id="frictionTxt">Fricci√≥n: 8% (tolerable)</div>
    </div>

    <p class="note" style="margin:10px 6px 0;">
      <strong style="color:#aab0c3">Nota:</strong> Esta app est√° dise√±ada para ser <em>frustrante</em> a prop√≥sito.
    </p>
  </aside>

  <main>
    <section id="view-dashboard" class="view">
      <div class="grid">
        <div class="card">
          <div class="hd">
            <h2>Actividad Reciente</h2>
            <div class="meta">√öltima actualizaci√≥n: <span id="lastUpdate">hace 47 min</span></div>
          </div>
          <div class="bd">
            <table>
              <thead>
                <tr>
                  <th>Evento</th><th>Usuario</th><th>Estado</th><th>Notas</th>
                </tr>
              </thead>
              <tbody id="activityTbody"></tbody>
            </table>
            <p class="note">Tip (malo): "si no entiendes, prueba hacer clic en todo".</p>
          </div>
        </div>

        <div class="card">
          <div class="hd">
            <h2>Alertas del Sistema</h2>
            <div class="meta">Prioridad: Alta (siempre)</div>
          </div>
          <div class="bd" id="alertsBox">
            <div class="tag bad">ERROR #A-17</div>
            <div class="tag warn">WARNING</div>
            <div class="tag bad">TIMEOUT</div>
            <p class="note" style="margin-top:10px">
              Mensajes ambiguos para aumentar ansiedad.
            </p>
            <ul style="margin:8px 0 0; padding-left:16px; font-size:11px; color:var(--muted)">
              <li>"Algo sali√≥ mal. Intenta m√°s tarde."</li>
              <li>"Permisos insuficientes (¬øcu√°les?)"</li>
              <li>"Sesi√≥n por expirar (sin opci√≥n clara de extender)"</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section id="view-clientes" class="view" style="display:none">
      <div class="card">
        <div class="hd">
          <h2>Registrar Cliente</h2>
          <div class="meta">Formulario Optimizado (Agrupamiento)</div>
        </div>
        
        <div class="bd">
            <div class="progress-container">
              <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
              </div>
              <div class="progress-labels">
                <span class="active-label">1. Datos Personales</span>
                <span>2. Contacto</span>
                <span>3. Configuraci√≥n</span>
              </div>
            </div>

          <p class="note">
            Mejora DCU: Se aplic√≥ la Ley de Miller dividiendo el proceso en 3 pasos para reducir la carga cognitiva.
          </p>

          <div class="form" id="clientForm">
            
            <div id="step-1" class="form-step">
                <h3>Paso 1: Identificaci√≥n</h3>
                <div class="field">
                <label>Nombre legal completo *</label>
                <input id="c_name" placeholder="Ingrese exactamente como en documento" />
                <div class="help">No use abreviaturas. No se admite "√ë" a veces.</div>
                </div>

                <div class="field">
                <label>RFC/RUC/NIT/ID Fiscal *</label>
                <input id="c_tax" placeholder="Ej: 0000000000000" />
                <div class="help">Debe tener 13, 14 o 15 d√≠gitos.</div>
                </div>

                <div class="field">
                <label>Industria (selecci√≥n confusa) *</label>
                <select id="c_industry">
                    <option value="">Seleccione...</option>
                    <option>Servicios varios (otros)</option>
                    <option>Industria 4.0 (¬ø?)</option>
                    <option>Comercio minorista pero no mayorista</option>
                    <option>Comercio mayorista pero no minorista</option>
                    <option>Educaci√≥n (privada no p√∫blica)</option>
                    <option>Educaci√≥n (p√∫blica no privada)</option>
                </select>
                <div class="help">Si eliges mal, no se puede cambiar.</div>
                </div>

                <div class="field">
                <label>Tipo de cliente *</label>
                <select id="c_type">
                    <option value="">Seleccione...</option>
                    <option>VIP</option>
                    <option>Normal</option>
                    <option>Riesgo</option>
                    <option>Prueba (bloquea facturaci√≥n)</option>
                </select>
                </div>

                <div class="actions step-nav">
                    <div></div> <button class="primary" onclick="changeStep(2)">Siguiente ‚ûú</button>
                </div>
            </div>

            <div id="step-2" class="form-step" style="display:none;">
                <h3>Paso 2: Localizaci√≥n</h3>
                <div class="field">
                <label>Correo corporativo obligatorio *</label>
                <input id="c_email" placeholder="name@empresa.com (no gmail)" />
                <div class="help">Rechazamos correos personales.</div>
                </div>

                <div class="field">
                <label>Tel√©fono (solo formato E.164) *</label>
                <input id="c_phone" placeholder="+593xxxxxxxxx" />
                <div class="help">Si no sabes E.164, mala suerte.</div>
                </div>

                <div class="field">
                <label>Direcci√≥n (m√≠n. 120 caracteres) *</label>
                <textarea id="c_address" placeholder="Calle, n√∫mero, referencia, sector, etc..."></textarea>
                <div class="help">Si no tienes 120 caracteres, inventa.</div>
                </div>

                <div class="actions step-nav">
                    <button onclick="changeStep(1)">‚¨Ö Atr√°s</button>
                    <button class="primary" onclick="changeStep(3)">Siguiente ‚ûú</button>
                </div>
            </div>

            <div id="step-3" class="form-step" style="display:none;">
                <h3>Paso 3: Detalles Finales</h3>
                <div class="field">
                <label>Notas internas (obligatorio) *</label>
                <textarea id="c_notes" placeholder="Escribe algo (lo que sea)"></textarea>
                </div>

                <div class="field">
                <label>Consentimiento (checkbox escondido) *</label>
                <input id="c_consent" type="checkbox" style="width:auto; transform:scale(1.1)" />
                <div class="help">Si no marcas esto, falla al final sin decirte por qu√©.</div>
                </div>

                <div class="field">
                <label>Captcha anti-humanos *</label>
                <input id="c_captcha" placeholder="¬øCu√°nto es 7+5? (a veces cambia)" />
                <div class="help">Pregunta cambia cuando presionas "Enviar".</div>
                </div>

                <div class="actions step-nav" style="display:block;">
                    <div style="display:flex; gap:10px; flex-wrap:wrap;">
                        <button onclick="changeStep(2)" style="margin-right:auto;">‚¨Ö Atr√°s</button>
                        <button id="btnCancelClient" class="danger">Cancelar</button>
                        <button id="btnSubmitClient" class="primary">Enviar</button>
                        <button id="btnPrintClient">Imprimir</button>
                    </div>
                </div>
            </div>

          </div>

          <p class="note" style="margin-top:10px">
            *El bot√≥n real de "Guardar" est√° escondido abajo a la derecha (mala pr√°ctica intencional).
          </p>
        </div>
      </div>
    </section>

    <section id="view-oportunidades" class="view" style="display:none">
      <div class="card">
        <div class="hd">
          <h2>Oportunidades (pipeline)</h2>
          <div class="meta">Filtros: <em>no recordados</em></div>
        </div>
        <div class="bd">
          <p class="note">Tabla extensa sin paginaci√≥n adecuada y con estados poco claros.</p>
          <table>
            <thead>
              <tr>
                <th>Cuenta</th><th>Monto</th><th>Prob.</th><th>Etapa</th><th>Acciones</th>
              </tr>
            </thead>
            <tbody id="oppsTbody"></tbody>
          </table>
          <div class="actions">
            <button id="btnNewOpp" class="primary">Nueva oportunidad</button>
            <button id="btnExport">Exportar .csvv</button>
          </div>
        </div>
      </div>
    </section>

    <section id="view-config" class="view" style="display:none">
      <div class="card">
        <div class="hd">
          <h2>Configuraci√≥n</h2>
          <div class="meta">Cuidado: cambios irreversibles</div>
        </div>
        <div class="bd">
          <p class="note">
            Opciones innecesarias y peligrosas, sin confirmaciones claras (mala UX intencional).
          </p>
          <div class="form">
            <div class="field">
              <label>Modo del sistema</label>
              <select id="sysMode">
                <option>Productivo (pero lento)</option>
                <option>Productivo (pero con errores)</option>
                <option>Experimental (rompe cosas)</option>
              </select>
              <div class="help">No hay documentaci√≥n.</div>
            </div>
            <div class="field">
              <label>Auto-cierre de sesi√≥n</label>
              <select id="autoLogout">
                <option value="30">30 segundos</option>
                <option value="60">1 minuto</option>
                <option value="120">2 minutos</option>
              </select>
              <div class="help">S√≠, es absurdamente corto.</div>
            </div>
          </div>
          <div class="actions">
            <button id="btnApplyConfig" class="primary">Aplicar</button>
            <button id="btnNuke" class="danger">Restablecer TODO</button>
          </div>
        </div>
      </div>
    </section>

    <section id="view-reportes" class="view" style="display:none">
      <div class="card">
        <div class="hd">
          <h2>Reportes</h2>
          <div class="meta">Generaci√≥n: "cuando quiera"</div>
        </div>
        <div class="bd">
          <p class="note">
            Reportes sin contexto, sin filtros claros, y con tiempos de carga simulados.
          </p>
          <div class="actions" style="justify-content:flex-start">
            <button id="btnRunReport" class="primary">Generar Reporte</button>
            <button id="btnRunReport2">Generar Reporte (lento)</button>
          </div>
          <div id="reportOutput" class="note" style="margin-top:12px; white-space:pre-wrap;"></div>
        </div>
      </div>
    </section>

    <button class="hidden-save" id="btnHiddenSave" title="Guardar (¬ø?)">üíæ Guardar</button>
  </main>
</div>

<div class="toast" id="toast">
  <strong id="toastTitle">Aviso</strong>
  <p id="toastMsg">Mensaje confuso.</p>
  <div class="bar"><i></i></div>
</div>

<div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="hd">
      <h3 id="modalTitle">Encuesta obligatoria</h3>
      <button id="modalX" class="danger">X</button>
    </div>
    <div class="bd">
      <p>Para continuar, responda (sin motivo). Cerrar puede perder cambios.</p>
      <div class="row">
        <div class="field">
          <label>¬øQu√© tan satisfecho est√°? *</label>
          <select id="m_q1">
            <option value="">Seleccione...</option>
            <option>Muy satisfecho</option>
            <option>Neutral</option>
            <option>Frustrado</option>
          </select>
        </div>
        <div class="field">
          <label>¬øRecomendar√≠a el sistema? *</label>
          <select id="m_q2">
            <option value="">Seleccione...</option>
            <option>S√≠</option>
            <option>No</option>
            <option>No s√©</option>
          </select>
        </div>
      </div>
      <div class="field" style="margin-top:10px">
        <label>Comentario (m√≠n. 80 caracteres) *</label>
        <textarea id="m_comment" placeholder="Escriba un comentario extenso..."></textarea>
        <div class="help">S√≠, es obligatorio y largo.</div>
      </div>
    </div>
    <div class="ft">
      <button id="btnModalSubmit" class="primary">Enviar</button>
      <button id="btnModalLater">Despu√©s (pero te insistir√°)</button>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>